=== Upload File Renamer (アップロードファイル名強制リネーム) ===
Plugin Name: Upload File Renamer (アップロードファイル名強制リネーム)
Description: 画像や動画などのファイルをアップロードする際、ファイル名を日本語やマルチバイト文字から安全でユニークな形式に強制的にリネームします。リネームの有効/無効、および命名規則（PHP date()関数書式）を管理画面から自由に設定できます。
Plugin URI: https://p-fox.jp/
Stable tag: 1.0.0
Author: Red Fox
Author URI: https://p-fox.jp/
Contributors: teamredfox
License: GPLv2 or later
License URI: http://www.gnu.org/licenses/gpl-2.0.html
Text Domain: move-file-name
Domain Path: /languages
Requires PHP: 7.2
Requires at least: 6.8
Tested up to: 6.8

アップロード時のファイル名に含まれる日本語や特殊文字によるサーバー負荷、セキュリティリスク、処理エラーを未然に防ぎます。

== Description ==

このプラグインは、WordPressのメディアアップロードプロセスに介入し、ファイル名に起因する様々な問題を解決するために開発されました。

WindowsやmacOSなどで作成されたファイル名には、サーバー環境やPHPのバージョンによって処理が不安定になるマルチバイト文字（日本語、中国語、特殊記号など）が含まれていることがあります。これにより、ファイルのリンク切れ、セキュリティソフトの誤検知、バックアップや移行時のエラーなど、予期せぬ問題が発生する可能性があります。

「Upload File Renamer」は、ファイルをアップロードする直前にファイル名を以下のルールで安全な形式に強制的に置き換えます。

主な機能
強制リネームのオン/オフ: 管理画面のチェックボックス一つで、リネーム機能全体を有効/無効にできます。（デフォルトは有効）

カスタム命名規則: ファイル名の接頭辞となる形式を、管理画面でPHPのdate()関数の書式（例: Ymd_His_ や U- など）を使って自由に設定できます。

ユニーク性の確保: ユーザーが設定した接頭辞の後に、必ずランダムなユニークID (uniqid()) が追加されます。これにより、同じ時刻に複数のファイルがアップロードされてもファイル名が衝突する心配がありません。

拡張子の維持: 元のファイルの拡張子（例: .png, .mp4）はそのまま維持されます。

このプラグインを利用することで、ファイルアップロード時の安定性が大幅に向上し、安心してメディアファイルを管理できるようになります。

== Installation ==

ZIPファイルをダウンロードし、WordPressの管理画面の「プラグイン」メニューから「新規追加」>「プラグインのアップロード」に進み、インストールします。

または、ダウンロードしたファイルを解凍し、中身を /wp-content/plugins/ ディレクトリにアップロードします。

WordPressの管理画面の「プラグイン」メニューで「Upload File Renamer (アップロードファイル名強制リネーム)」を有効化します。

「設定」 > 「ファイルリネーム」のページに移動し、命名規則を設定してください。

== Frequently Asked Questions ==

= なぜファイル名を強制的にリネームする必要があるのですか？ =

主に以下の理由があります。

互換性: 日本語などのマルチバイト文字が、特に古いサーバー環境や一部のプラグインで文字化けやエラーの原因になるのを防ぐためです。

セキュリティ: ファイル名に含まれる可能性のある悪意のある文字列を完全に排除するためです。

一意性: 複数のユーザーが同じファイル名（例: image.jpg）をアップロードした際の衝突を防ぐためです。

= リネーム形式で「PHPのdate()関数書式」を使うのはなぜですか？ =

タイムスタンプや日付など、ファイルがいつアップロードされたかを人間が認識しやすい形式でファイル名に含めることができるためです。例えば Ymd- と設定すれば 20251011- のような接頭辞が生成されます。

= ユニークIDは必ず追加されるのですか？ =

はい、リネーム後のファイル名には、設定した日付/時刻の接頭辞の後に、衝突を避けるために必ずランダムなユニークID（例: -65e3b5e43a9b9 のような文字列）が追加されます。このIDがあるため、ファイル名が重複することは極めて稀になります。

= ログインユーザーと非ログインユーザー、どちらからのアップロードに適用されますか？ =

メディアライブラリへのアップロード権限を持つ、ログインしているユーザー（管理者、編集者、投稿者など）からのすべてのアップロードに適用されます。

== Screenshots ==

The 'ファイルリネーム' page added to the 'Settings' menu in the admin area.

The settings panel allowing customization of the rename toggle and the date() format string.

== Changelog ==

= 1.0.0 =
初版リリース。
アップロードファイル名の強制リネーム機能を追加。
リネームの有効/無効トグル機能を追加（デフォルトは有効）。
PHP date()関数書式に基づいたカスタム命名規則の設定機能を追加。

== Upgrade Notice ==

= 1.0.0 =
Initial release. No special upgrade notice is needed for this version.